<!DOCTYPE html>			<!--declare that webpage is of type html5-->

<html lang="en">
<!--Head of code-->
<head>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/4.8.0/codemirror.css">
<title>Code Prettifier</title>
<script src="HTMLPrettifier.js"></script>
</head>

<!--Body of code-->

	<!--Use the main area to add the main content of the webpage-->
    <p>
      <label for="badhtml">HTML code to fix</label> 
      <textarea id="badhtml"
         class="editor"
         data-editor-lang="xml">
     </textarea>
    </p>
    <p>
      <label for="conf">Configuration</label> 
      <textarea id="conf"
         class="editor"
         data-editor-lang="javascript">
         {
		  "indent": "auto",
		  "indent-spaces": 2,
		  "wrap": 80,
		  "markup": true,
		  "output-xml": false,
		  "numeric-entities": true,
		  "quote-marks": true,
		  "quote-nbsp": false,
		  "show-body-only": false,
		  "quote-ampersand": false,
		  "break-before-br": true,
		  "uppercase-tags": false,
		  "uppercase-attributes": false,
		  "drop-font-tags": true,
		  "tidy-mark": false
		}
		</textarea>
    </p>

    <form id="Form" action="saveFile.php" method="post">
    	<input type="hidden" id="myResult" name="result">
      	<input type="button" onclick="run()" value="run">
    </form>

    <script>
	function run(){
		// http://lovasoa.github.io/tidy-html5/demo.html for site containing source code
	    var html = editors[0].getValue();
	    var json = JSON.parse(editors[1].getValue());
	    var result = tidy_html5(html, json);
	    editors[0].setValue(result);
	    document.getElementById("myResult").value = result;
	    document.getElementById("Form").submit();
	}
    </script> 

    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/4.8.0/codemirror.js"></script> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/4.8.0/mode/javascript/javascript.min.js"></script> 
    <script src="http://codemirror.net/mode/xml/xml.js"></script> 
    <script>
	var editors = [];
	var elems = document.getElementsByClassName("editor");
	for(var i=0; i<elems.length; i++) {
	  var elem = elems[i];
	  var editor = CodeMirror.fromTextArea(elem, {
	    mode: elem.dataset.editorLang,
	    lineNumbers: true
	  });
	  editors.push(editor);
	}
    </script>

	<!--
	<footer style = "text-align: center;">
		&copy; Copyright 2015. All Rights Reserved.<br>
	</footer>
	-->


</html>